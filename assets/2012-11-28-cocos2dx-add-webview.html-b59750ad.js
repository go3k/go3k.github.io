import{_ as o}from"./plugin-vue_export-helper-c27b6911.js";import{r as p,o as c,c as i,a as n,b as a,e,d as l,f as t}from"./app-c703f97d.js";const u={},r=n("p",null,"感谢党感谢国家，感谢攀哥、教主、锋哥。",-1),d=n("p",null,"游戏中的帮助和游戏公告，可以通过嵌入显示WebView的方案来实现，通过编辑HTML来修改、更新公告的样式和内容都很方便。",-1),k=n("h1",{id:"ios平台嵌入",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ios平台嵌入","aria-hidden":"true"},"#"),a(" iOS平台嵌入")],-1),h={href:"http://www.cocos2dev.com/?p=248",target:"_blank",rel:"noopener noreferrer"},b=n("h1",{id:"android平台嵌入",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#android平台嵌入","aria-hidden":"true"},"#"),a(" Android平台嵌入")],-1),m=n("h2",{id:"_1-通过jni从cocos2d-x的c-代码调用java代码。",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-通过jni从cocos2d-x的c-代码调用java代码。","aria-hidden":"true"},"#"),a(" 1. 通过JNI从cocos2d-x的C++代码调用java代码。")],-1),w=n("p",null,"这是Android实现WebView嵌入的前提条件，务必仔细的学习一遍，否则无法向下继续。",-1),v={href:"http://go3k.org/?p=49",target:"_blank",rel:"noopener noreferrer"},_=t(`<h2 id="_2-java代码的实现" tabindex="-1"><a class="header-anchor" href="#_2-java代码的实现" aria-hidden="true">#</a> 2. java代码的实现</h2><p>标准Android显示WebView的实现，参考代码如下：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">displayWebView</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">runOnUiThread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//actInstance为成员变量，是当前的Activity。   m_webView是WebView类型的成员变量</span>
                	<span class="token class-name">LinearLayout</span> layout <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinearLayout</span><span class="token punctuation">(</span>actInstance<span class="token punctuation">)</span><span class="token punctuation">;</span>
                	actInstance<span class="token punctuation">.</span><span class="token function">addContentView</span><span class="token punctuation">(</span>layout<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">LayoutParams</span><span class="token punctuation">(</span><span class="token class-name">LayoutParams</span><span class="token punctuation">.</span><span class="token constant">FILL_PARENT</span><span class="token punctuation">,</span><span class="token class-name">LayoutParams</span><span class="token punctuation">.</span><span class="token constant">FILL_PARENT</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                	m_webView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebView</span><span class="token punctuation">(</span>actInstance<span class="token punctuation">)</span><span class="token punctuation">;</span>
                	layout<span class="token punctuation">.</span><span class="token function">addView</span><span class="token punctuation">(</span>m_webView<span class="token punctuation">)</span><span class="token punctuation">;</span>
                	<span class="token class-name">LinearLayout<span class="token punctuation">.</span>LayoutParams</span> linearParams <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">LinearLayout<span class="token punctuation">.</span>LayoutParams</span><span class="token punctuation">)</span> m_webView<span class="token punctuation">.</span><span class="token function">getLayoutParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//可选的webview位置，x,y,width,height可任意填写，也可以做为函数参数传入。</span>
                	linearParams<span class="token punctuation">.</span>leftMargin <span class="token operator">=</span> x<span class="token punctuation">;</span>
                	linearParams<span class="token punctuation">.</span>topMargin <span class="token operator">=</span> y<span class="token punctuation">;</span>
                	linearParams<span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
                	linearParams<span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>
                	m_webView<span class="token punctuation">.</span><span class="token function">setLayoutParams</span><span class="token punctuation">(</span>linearParams<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//可选的webview配置</span>
                	m_webView<span class="token punctuation">.</span><span class="token function">setBackgroundColor</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                	m_webView<span class="token punctuation">.</span><span class="token function">getSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCacheMode</span><span class="token punctuation">(</span><span class="token class-name">WebSettings</span><span class="token punctuation">.</span><span class="token constant">LOAD_NO_CACHE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                	m_webView<span class="token punctuation">.</span><span class="token function">getSettings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAppCacheEnabled</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里需要注意的问题是：</p><p>JNI调用过来的代码并不是在主线程程序流中，UI显示需要放到主线程中进行。这个问题卡了我半天的时间，最后问了锋哥才明白Android上需要这么搞。</p><h3 id="源码分享" tabindex="-1"><a class="header-anchor" href="#源码分享" aria-hidden="true">#</a> 源码分享</h3>`,6),f={href:"https://github.com/go3k/CCXWebview",target:"_blank",rel:"noopener noreferrer"},y=t('<h2 id="_3-对webview的配置" tabindex="-1"><a class="header-anchor" href="#_3-对webview的配置" aria-hidden="true">#</a> 3. 对webView的配置</h2><h3 id="在自定义的webview中跳转链接-而不是打开系统浏览器。" tabindex="-1"><a class="header-anchor" href="#在自定义的webview中跳转链接-而不是打开系统浏览器。" aria-hidden="true">#</a> 在自定义的webView中跳转链接，而不是打开系统浏览器。</h3><p>这需要对webView设置WebViewClient，并实现shouldOverrideUrlLoading方法，如下：</p><h3 id="改变webview视图的大小与位置" tabindex="-1"><a class="header-anchor" href="#改变webview视图的大小与位置" aria-hidden="true">#</a> 改变WebView视图的大小与位置</h3><p>设置webView的LayoutParamaters，setLayoutParams。</p><p>参考链接：</p>',6),V={href:"http://www.cocos2d-x.org/boards/6/topics/4450",target:"_blank",rel:"noopener noreferrer"};function g(L,x){const s=p("ExternalLinkIcon");return c(),i("div",null,[r,d,k,n("p",null,[a("iOS平台上的嵌入很顺利，网上有现成的教程加代码，关键是做好OC与C++代码混编的封装。 参考如下链接中的实现方式： "),n("a",h,[a("cocos2d-x 使用UIWebView加载网页"),e(s)])]),l(" more "),b,m,w,n("p",null,[a("详情参见： "),n("a",v,[a("JNI使用教程"),e(s)]),a(" 这是我总结的一篇JNI使用的教程，基本涵盖所有JNI使用相关的要点。")]),_,n("p",null,[a("抽时间Github上建了项目，地址如下： "),n("a",f,[a("https://github.com/go3k/CCXWebview"),e(s)])]),y,n("p",null,[n("a",V,[a("How to add an UIWebView to Cocos2d-x ?"),e(s)])])])}const I=o(u,[["render",g],["__file","2012-11-28-cocos2dx-add-webview.html.vue"]]);export{I as default};
